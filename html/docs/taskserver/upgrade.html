<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/images/favicon.ico">

    <title>Taskwarrior - Upgrading Taskserver</title>

    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/site.css" rel="stylesheet">
    <link href="/docs/docs.css" rel="stylesheet">

    <!--[if lt IE 9]><script src="/bootstrap/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>

  <body>
    <div class="navbar navbar-default navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <a class="navbar-brand text-heavy" href="/"><img src="/images/tw-s.png" alt="Taskwarrior brand" style="width:24px; height:24px;"> TASKWARRIOR</a>
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="/news/">News</a></li>
            <li class="active"><a href="/docs/">Docs</a></li>
            <li><a href="/download/">Download</a></li>
            <li><a href="/support/">Support</a></li>
            <li><a href="/tools/">Tools</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="col-md-10">
        <div class="col-md-2">
        </div>

        <div class="col-md-10 main">
          <div class="row">
            <h3>Upgrading Taskserver</h3>
            <p>
              Upgrading to Taskserver
              <span class="label label-success">1.1.0</span>
              requires some configuration changes.

              The required changes are mostly concerned with improvements to
              security and encryption.

              Updating the software itself is straightforward.
            </p>

            <a name="software"></a>
            <h4>Upgrade the Software</h4>
            <p>
              This is simply a matter of shutting down the server, installing
              the new software, modifying the configuration as discussed below,
              and restarting the server.

              Before doing this, please read the issues below, so that you will be
              prepared, and more secure.
            </p>

            <a name="pki"></a>
            <h4>PKI</h4>
            <p>
              If you used self-signed certificates, and the scripts provided
              with Taskserver 1.0.0, then you will want to regenerate all your
              CA, CRL, server, client and user certificates using the updated
              scripts.
            </p>

            <p>
              The scripts now properly use the <code>CN</code> field, and no
              longer use <code>SAN</code>s.

              This is important for hostname verification, and required for
              <code>strict</code> validation.
            </p>

            <p>
              Please note also that the PKI scripts provided use a certificate
              expiration of 365 days.  This means no certificate is valid after
              a year. If you used the default scripts when you installed
              Taskserver 1.0.0, you may have already discovered this.
            </p>

            <p>
              It is generally a good idea to expire and renew certificates.
              Long-term certificates may need to be revoked using the CRL,
              so short-term certificates provide a dead-man's switch approach.
            </p>

            <a name="allowdeny"></a>
            <h4>Allow/Deny</h4>
            <p>
              The <code>client.allow</code> and <code>client.deny</code>
              configuration settings should be removed, as this feature has
              been removed from the server.

              As it is easy to spoof a valid client, this technique offered no
              security.
            </p>

            <a name="trust"></a>
            <h4>Trust</h4>
            <p>
              The new <code>trust</code> configuration setting determines how
              client certificates are validated.  Values maybe either
              <code>allow all</code> or <code>strict</code>.

              The value <code>allow all</code> performs no client certificate
              validation. This is not recommended.

              The value <code>strict</code> causes the client certificate to
              be validated against a CA.
            </p>

            <p>
              Note that using the <code>strict</code> value may require that
              your server certificates be replaced. This depends on the data
              used to create your original certificates. Taskserver PKI scripts
              now create certificates with a proper CN value.
            </p>

            <a name="gnutls"></a>
            <h4>GnuTLS</h4>
            <p>
              Please bear in mind that
              <a href="https://gnutls.org/">GnuTLS</a>
              is a security product, and it is important that you use the most
              recent version available.  Please upgrade GnuTLS before building
              Taskwarrior and Taskserver.
            </p>

            <p>
              We have received many reports of problems with older GnuTLS
              releases, specifically version 2.12.20 and earlier cannot
              complete handshake with a CRL.
            </p>

            <p>
              Versions prior to 3.2 also suffer from significant memory leaks,
              which will take down your Taskserver over time.
            </p>

            <p>
              In addition to benefiting from bug fixes and leak fixes, newer
              GnuTLS versions include new and more secure default ciphers and
              algorithms. Security is important.
            </p>
          </div>

          <br />
          <br />
        </div>
      </div>

      <div class="col-md-2">
        <div class="alert alert-warning">
          <ul class="list-unstyled">
            <li><a href="#software">Software</a></li>
            <li><a href="#pki">PKI</a></li>
            <li><a href="#allowdeny">Allow/Deny</a></li>
            <li><a href="#trust">Trust</a></li>
            <li><a href="#gnutls">GnuTLS</a></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Occupy some vertical space -->
    <div class="container">
      <div class="col-md-3 main">
      </div>
    </div>

    <div id="footer">
      <div class="container">
        <div class="col-md-2">
          <p class="text-muted">
            Get Involved
            <br />
            <a href="https://github.com/GothenburgBitFactory/taskwarrior/issues">Submit a bug</a>
            <br />
            <a href="https://github.com/GothenburgBitFactory/taskwarrior">Clone the code</a>
          </p>
        </div>
        <div class="col-md-2">
          <p class="text-muted">
            Related Sites
            <br />
            <a href="https://gothenburgbitfactory.org">gothenburgbitfactory.org</a>
            <br />
            <a href="https://holidata.net">holidata.net</a>
          </p>
        </div>
        <div class="col-md-2">
          <p class="text-muted">
            Contact
            <br />
            <a href="mailto:support@taskwarrior.org"><span class="glyphicon glyphicon-envelope"></span> Email</a>
            <br />
            <a href="https://twitter.com/taskwarrior"><img src="/images/twitter_dark.png" alt="twitter logo" style="width:16px; height:16px;"> Twitter</a>
          </p>
        </div>
        <div class="col-md-2">
          <div class="text-muted">
            Donate
            <br />
            <a href="https://github.com/sponsors/GothenburgBitFactory">Sponsor us on Github sponsors!</a>
          </div>
        </div>
        <div class="col-md-2">
          <p class="text-muted">
            Copyright &copy: 2018 <a href="/about.html">GÃ¶teborg Bit Factory</a>
          </p>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>
